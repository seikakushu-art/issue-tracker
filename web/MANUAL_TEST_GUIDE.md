# 手動テスト手順書

Playwrightの自動テストがうまくいかない場合の、全機能を手動でテストするための手順書です。

## テスト前の準備

1. 開発サーバーを起動: `ng serve` または `npm start`
2. ブラウザで `http://localhost:4200` を開く
3. テスト用のアカウントを2つ以上用意（プロジェクト招待機能のテストのため）

---

## 1. 認証機能

### 1.1 ログイン (`/login`)
- [ ] メールアドレスとパスワードでログイン
- [ ] ログイン失敗時のエラーメッセージ表示
- [✅] ログイン成功後、ダッシュボードへリダイレクト

### 1.2 アカウント作成 (`/register`)
- [ ] 新規アカウント作成フォームの表示
- [ ] メールアドレス、パスワード、表示名の入力
- [ ] アカウント作成成功後、ログイン画面へリダイレクト
- [✅] 作成したアカウントでログインできることを確認

### 1.3 プロジェクト招待 (`/invite/:token`)
- [ ] 招待リンクにアクセス
- [ ] 招待トークンが有効な場合、プロジェクトへの参加確認
- [✅] 招待トークンが無効/期限切れの場合、エラーメッセージ表示

---

## 2. ダッシュボード (`/dashboard` または `/`)

### 2.1 基本表示
- [ ] プロジェクトカードの一覧表示
- [ ] 各プロジェクトの進捗率、遅延リスク、重要タスク数の表示
- [✅] プロジェクトカードのクリックでプロジェクト詳細へ遷移

### 2.2 通知機能
- [ ] 本日締切タスクの通知表示
- [ ] 期限超過タスクの通知表示
- [ ] メンション通知の表示
- [ ] 通知をクリックしてタスク詳細へ遷移
- [✅] 「すべて既読にする」ボタンの動作

### 2.3 重要タスク（アラート）
- [ ] 重要タスクカードの表示
- [ ] タスクカードから「完了」「保留」ボタンの動作
- [✅] タスクカードをクリックしてタスク詳細へ遷移

### 2.4 ボトルネック検知
- [ ] ボトルネックインサイトの表示
- [✅] ボトルネック行をクリックしてスマートフィルター画面へ遷移

### 2.5 掲示板プレビュー
- [ ] 最新の掲示板投稿5件の表示
- [✅] 投稿をクリックして掲示板画面へ遷移

### 2.6 プロジェクト並び替え
- [ ] 「遅延リスク順」「進捗率順」「重要タスク多い順」の切り替え
- [✅] 並び替え結果が正しく反映される

### 2.7 再読み込み
- [✅] 再読み込みボタンでダッシュボード全体を更新

---

## 3. プロジェクト一覧 (`/projects`)

### 3.1 基本表示
- [ ] プロジェクト一覧の表示
- [ ] プロジェクトカードのクリックでプロジェクト詳細へ遷移
- [✅] アーカイブ済みプロジェクトの表示/非表示切り替え

### 3.2 プロジェクト作成
- [ ] 「新規プロジェクト作成」ボタンでモーダルを開く
- [ ] プロジェクト名、説明、開始日、終了日、達成目標を入力
- [ ] テンプレートから作成（テンプレート選択）
- [✅] プロジェクト作成成功後、一覧に反映

### 3.3 プロジェクト編集
- [ ] プロジェクトカードの編集ボタンでモーダルを開く
- [ ] プロジェクト情報の編集
- [✅] 保存後、変更が反映される

### 3.4 プロジェクト削除
- [ ] プロジェクトの削除ボタン
- [ ] 確認ダイアログの表示
- [✅] 削除後、一覧から除外される

### 3.5 プロジェクトアーカイブ
- [ ] プロジェクトのアーカイブ/復元ボタン
- [ ] 確認ダイアログの表示
- [✅] アーカイブ後、「アーカイブ済みを表示」で表示される

### 3.6 プロジェクトテンプレート
- [ ] プロジェクトをテンプレートとして保存
- [ ] テンプレート一覧の表示
- [ ] テンプレートからプロジェクトを作成
- [✅] テンプレートの削除

### 3.7 プロジェクト招待リンク
- [ ] 招待モーダルを開く
- [ ] 招待リンクの作成（ロール、有効期限、使用回数制限の設定）
- [ ] 招待リンクのコピー
- [ ] 招待リンク一覧の表示
- [✅] 招待リンクの無効化（取り消し）

### 3.8 メンバー管理
- [ ] プロジェクトメンバー一覧の表示
- [ ] メンバーの削除（管理者のみ）
- [✅] メンバーのロール表示

### 3.9 プロジェクトピン止め
- [ ] プロジェクトのピン止め/解除
- [✅] ピン止めされたプロジェクトが先頭に表示される

### 3.10 並び替え
- [ ] 名前、開始日、終了日、進捗率、作成日、期間、課題数、メンバー数で並び替え
- [✅] 昇順/降順の切り替え

### 3.11 スマートフィルター
- [ ] スマートフィルターパネルの開閉
- [ ] タグ、担当者、ステータス、重要度、期限でのフィルタリング
- [ ] フィルター条件の組み合わせ
- [✅] フィルター結果の表示

---

## 4. 課題一覧 (`/projects/:projectId`)

### 4.1 基本表示
- [ ] 課題一覧の表示
- [ ] 課題カードのクリックでタスク一覧へ遷移
- [✅] アーカイブ済み課題の表示/非表示切り替え

### 4.2 課題作成
- [ ] 「新規課題作成」ボタンでモーダルを開く
- [ ] 課題名、説明、達成目標、テーマカラーを入力
- [✅] 課題作成成功後、一覧に反映

### 4.3 課題編集
- [ ] 課題カードの編集ボタンでモーダルを開く
- [ ] 課題情報の編集
- [✅] 保存後、変更が反映される

### 4.4 課題削除
- [ ] 課題の削除ボタン
- [ ] 確認ダイアログの表示
- [✅] 削除後、一覧から除外される

### 4.5 課題アーカイブ
- [ ] 課題のアーカイブ/復元ボタン
- [ ] 確認ダイアログの表示
- [✅] アーカイブ後、「アーカイブ済みを表示」で表示される

### 4.6 課題移動
- [ ] 課題を別プロジェクトへ移動
- [ ] 移動先プロジェクトの選択
- [✅] 移動後、元のプロジェクトから除外され、移動先に表示される

### 4.7 並び替え
- [ ] 名前、開始日、終了日、進捗率、作成日、期間、タスク数で並び替え
- [✅] 昇順/降順の切り替え

### 4.8 スマートフィルター
- [ ] スマートフィルターパネルの開閉
- [ ] タグ、担当者、ステータス、重要度、期限でのフィルタリング
- [ ] フィルター条件の組み合わせ
- [✅] フィルター結果の表示

---

## 5. タスク一覧 (`/projects/:projectId/issues/:issueId`)

### 5.1 基本表示
- [ ] タスク一覧の表示
- [ ] タスクカードのクリックで詳細パネルを開く
- [✅] アーカイブ済みタスクの表示/非表示切り替え

### 5.2 タスク作成
- [ ] 「新規タスク作成」ボタンでモーダルを開く
- [ ] タイトル、説明、開始日、終了日、達成目標、重要度、ステータスを入力
- [ ] タグの選択
- [ ] チェックリスト項目の追加
- [✅] タスク作成成功後、一覧に反映

### 5.3 タスク編集
- [ ] タスクカードの編集ボタンでモーダルを開く
- [ ] タスク情報の編集
- [✅] 保存後、変更が反映される

### 5.4 タスク削除
- [ ] タスクの削除ボタン
- [ ] 確認ダイアログの表示
- [✅] 削除後、一覧から除外される

### 5.5 タスクアーカイブ
- [ ] タスクのアーカイブ/復元ボタン
- [ ] 確認ダイアログの表示
- [✅] アーカイブ後、「アーカイブ済みを表示」で表示される

### 5.6 ステータス変更
- [ ] ステータスメニューの開閉
- [ ] ステータスを「未完了」「進行中」「保留」「完了」「破棄」に変更
- [✅] ステータス変更後、進捗率が更新される

### 5.7 チェックリスト
- [ ] チェックリスト項目の追加（モーダル内）
- [ ] チェックリスト項目の削除（モーダル内）
- [ ] 詳細パネルからチェックリスト項目の追加
- [ ] 詳細パネルからチェックリスト項目の削除
- [ ] チェックリスト項目の完了/未完了切り替え
- [ ] すべてのチェックリストが完了したときの確認ダイアログ
- [✅] チェックリスト完了時にタスクを完了にするか選択

### 5.8 タグ管理
- [ ] タグの選択/解除（モーダル内）
- [ ] カスタムタグの作成（タグ名、カラー指定）
- [ ] タグの削除（作成者のみ、または管理者）
- [✅] タグの最大数制限（10個）

### 5.9 タスク参加/退出
- [ ] タスク詳細パネルから「参加」ボタン
- [ ] タスク詳細パネルから「退出」ボタン
- [ ] 参加人数の上限（10人）の確認
- [✅] 参加/退出後の担当者リストの更新

### 5.10 タスクピン止め
- [ ] タスクのピン止め/解除
- [✅] ピン止めされたタスクが先頭に表示される

### 5.11 並び替え
- [ ] タイトル、開始日、終了日、進捗率、重要度、作成日、期間で並び替え
- [✅] 昇順/降順の切り替え

### 5.12 フィルター
- [ ] ステータスフィルター
- [ ] 重要度フィルター
- [✅] スマートフィルター（タグ、担当者、ステータス、重要度、期限）

### 5.13 タスク詳細パネル
- [ ] タスク詳細情報の表示
- [ ] 担当者一覧の表示
- [ ] タグ一覧の表示
- [✅] 進捗率の表示

### 5.14 コメント機能
- [ ] コメント一覧の表示
- [ ] コメントの投稿（テキスト入力）
- [ ] メンション機能（@ユーザー名）
- [ ] メンションセレクターの開閉
- [ ] コメントの削除（作成者のみ、または管理者）
- [✅] コメントの最大数制限（500件）

### 5.15 添付ファイル機能
- [ ] 添付ファイル一覧の表示
- [ ] 添付ファイルのアップロード（複数ファイル対応）
- [ ] 添付ファイルのダウンロード
- [ ] 添付ファイルの削除（アップローダーのみ、または管理者）
- [✅] 添付ファイルの最大数制限（20件）

---

## 6. 掲示板 (`/board`)

### 6.1 基本表示
- [ ] 掲示板投稿一覧の表示
- [ ] ページネーション（20件/ページ）
- [✅] 投稿の展開/折りたたみ

### 6.2 投稿作成
- [ ] 投稿フォームの表示
- [ ] タイトル、本文、関連プロジェクトの選択
- [ ] 投稿の送信
- [✅] 投稿成功後、一覧に反映

### 6.3 投稿削除
- [ ] 投稿の削除ボタン（作成者のみ、または管理者）
- [ ] 確認ダイアログの表示
- [✅] 削除後、一覧から除外される

### 6.4 投稿の表示
- [ ] 投稿者の情報表示（ユーザー名、アイコン）
- [ ] 投稿日時の表示
- [ ] 関連プロジェクトの表示
- [✅] 投稿内容の表示

---

## 7. ガントチャート (`/gantt`)

### 7.1 基本表示
- [ ] ガントチャートの表示
- [ ] プロジェクト、課題、タスクの階層表示
- [✅] タイムラインの表示

### 7.2 操作
- [ ] ズームイン/アウト
- [ ] スクロール（横方向、縦方向）
- [✅] タスクのクリックでタスク詳細へ遷移

---

## 8. ツリー表示 (`/tree`)

### 8.1 基本表示
- [ ] プロジェクト→課題→タスクのツリー構造表示
- [✅] ノードの展開/折りたたみ

### 8.2 操作
- [ ] ノードのクリックで詳細画面へ遷移
- [✅] ツリー全体の展開/折りたたみ

---

## 9. 添付ファイル一覧 (`/attachments`)

### 9.1 基本表示
- [ ] 全プロジェクトの添付ファイル一覧表示
- [✅] ファイル名、サイズ、アップロード日時、アップローダーの表示

### 9.2 操作
- [ ] ファイルのダウンロード
- [ ] ファイルの削除（権限がある場合）
- [✅] ファイルのフィルタリング（プロジェクト、課題、タスク）

---

## 10. 横断検索 (`/search`)

### 10.1 基本検索
- [ ] 検索キーワードの入力
- [ ] 検索実行
- [✅] 検索結果の表示（プロジェクト、課題、タスク、掲示板）

### 10.2 フィルター
- [ ] タイプフィルター（プロジェクト、課題、タスク、掲示板）
- [✅] アーカイブ済みを含む/含まない

### 10.3 検索結果
- [ ] 検索結果のクリックで詳細画面へ遷移
- [✅] 検索結果の件数表示

---

## 11. ユーザー設定 (`/settings`)

### 11.1 基本表示
- [ ] ユーザー設定画面の表示
- [✅] 現在のユーザー情報の表示

### 11.2 設定変更
- [ ] ユーザー名の変更
- [ ] プロフィール画像の変更
- [✅] 設定の保存

---

## 12. ナビゲーション

### 12.1 ヘッダーナビゲーション
- [ ] 「ダッシュボード」リンク
- [ ] 「プロジェクト一覧」リンク
- [ ] 「掲示板」リンク
- [ ] 「ガントチャート」リンク
- [ ] 「ツリー」リンク
- [✅] 「添付ファイル一覧」リンク

### 12.2 パンくずリスト
- [ ] プロジェクト詳細ページでのパンくず表示
- [ ] 課題詳細ページでのパンくず表示
- [ ] タスク詳細ページでのパンくず表示
- [✅] パンくず項目のクリックで該当ページへ遷移

### 12.3 サイドバー
- [ ] プロジェクトサイドバーの表示
- [ ] サイドバーからプロジェクト選択
- [✅] サイドバーから課題選択

---

## 13. 権限テスト

### 13.1 管理者権限
- [ ] プロジェクトの作成、編集、削除
- [ ] 課題の作成、編集、削除、移動
- [ ] タスクの作成、編集、削除
- [ ] メンバーの削除
- [ ] 招待リンクの作成、無効化
- [✅] すべてのコメント、添付ファイルの削除

### 13.2 メンバー権限
- [ ] プロジェクトの閲覧
- [ ] 課題の作成、編集、削除
- [ ] タスクの作成、編集（自分が作成したもの、または担当者）
- [ ] タスクへの参加/退出
- [ ] コメントの投稿、削除（自分が作成したもの）
- [✅] 添付ファイルのアップロード、削除（自分がアップロードしたもの）

### 13.3 ゲスト権限
- [ ] プロジェクトの閲覧のみ
- [✅] 作成、編集、削除操作ができないことの確認

---

## 14. エラーハンドリング

### 14.1 ネットワークエラー
- [ ] オフライン時のエラーメッセージ表示
- [✅] タイムアウト時のエラーメッセージ表示

### 14.2 バリデーションエラー
- [ ] 必須項目未入力時のエラーメッセージ
- [ ] 文字数制限超過時のエラーメッセージ
- [✅] 日付形式エラー時のメッセージ

### 14.3 権限エラー
- [ ] 権限がない操作時のエラーメッセージ
- [✅] アクセスできないリソースへのアクセス時のエラーメッセージ

---

## 15. パフォーマンステスト

### 15.1 大量データ
- [ ] プロジェクトが30件の場合の表示速度
- [ ] 課題が100件以上ある場合の表示速度
- [ ] タスクが100件以上ある場合の表示速度
- [✅] コメントが500件ある場合の表示速度

### 15.2 リアルタイム更新
- [ ] 複数ブラウザで同時に操作した場合の同期
- [✕] データ更新の反映速度

---

## テスト完了チェックリスト

- [ ] すべての主要機能が動作する
- [ ] エラーメッセージが適切に表示される
- [ ] 権限チェックが正しく機能する
- [ ] データの整合性が保たれる
- [ ] UIが適切に表示される
- [ ] ナビゲーションが正しく動作する
- [ ] モーダル、ダイアログが正しく開閉する
- [ ] フォームのバリデーションが機能する
- [ ] ページネーションが正しく動作する
- [ ] フィルター、並び替えが正しく動作する

---

## 注意事項

- テスト中にエラーが発生した場合は、ブラウザのコンソールを確認してください
- データベース（Firestore）の状態も確認してください
- 複数のブラウザ/タブで同時に操作して、競合状態をテストしてください
- モバイルブラウザでも動作確認してください（レスポンシブデザイン）

